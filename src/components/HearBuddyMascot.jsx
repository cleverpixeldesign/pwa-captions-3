import { useState } from "react";

export const HearBuddyMascot = ({
  className = "w-20 h-20 md:w-20 md:h-20",
  listening = false,
}) => {
  const [isWagging, setIsWagging] = useState(false);

  const handleMascotClick = () => {
    setIsWagging(true);
    setTimeout(() => {
      setIsWagging(false);
    }, 600); // Match animation duration
  };

  return (
    <svg
      id="Layer_2"
      data-name="Layer 2"
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 301.55 283.68"
      className={`${className} cursor-pointer`}
      onClick={handleMascotClick}
      style={{ overflow: "visible" }} // keep tail from being clipped
    >
      <defs>
        <style>
  {`
    .cls-1 { fill: #fecd52; }
    .cls-2 { fill: #ed4c4a; }
    .cls-3 { fill: #3ea8ab; }
    .cls-4 { fill: #fffef8; }
    .cls-5 { fill: #fffefa; }
    .cls-6 { fill: #60aaae; }
    .cls-7 { fill: #3fa9ae; }

    @keyframes wagTail {
      0%, 100% {
        transform: rotate(0deg);
      }
      25% {
        transform: rotate(-18deg);
      }
      50% {
        transform: rotate(18deg);
      }
      75% {
        transform: rotate(-10deg);
      }
    }

    .tail-group {
      transform-box: fill-box;
      transform-origin: 50% 90%; /* left-bottom of tail for natural wag */
    }

    .tail-wag {
      animation: wagTail 0.6s ease-in-out;
    }

    .tail-wag-continuous {
      animation: wagTail 0.6s ease-in-out infinite;
    }

    @keyframes pulseSoundWaves {
      0%, 100% {
        opacity: 0.5;
        transform: scale(1);
      }
      50% {
        opacity: 1;
        transform: scale(1.15);
      }
    }

    .sound-wave-1 {
      animation: pulseSoundWaves 1.2s ease-in-out infinite;
      animation-delay: 0s;
    }

    .sound-wave-2 {
      animation: pulseSoundWaves 1.2s ease-in-out infinite;
      animation-delay: 0.3s;
    }

    .sound-wave-3 {
      animation: pulseSoundWaves 1.2s ease-in-out infinite;
      animation-delay: 0.15s;
    }

    .sound-wave-4 {
      animation: pulseSoundWaves 1.2s ease-in-out infinite;
      animation-delay: 0.45s;
    }
  `}
</style>
      </defs>
      <g id="Layer_2-2" data-name="Layer 2">
        <g>
          {/* TAIL GROUP â€“ separated for animation, comes first in SVG */}
          <g id="Tail_Group" data-name="Tail Group" className={`tail-group ${listening ? "tail-wag-continuous" : isWagging ? "tail-wag" : ""}`}>
            <path id="Taill_Fill" data-name="Taill Fill" className="cls-5" d="M25.45,208.13c3.65.83,2.01,5.73,2.49,8.18,1.59,8,4.82,14.89,12.93,19.81-1.13,7.55-2.66,15.26-.7,22.84-18.81-6.74-29.61-31.04-21.02-46.09,1.29-2.26,2.63-5.57,6.3-4.73"/>
            <ellipse className="cls-5" cx="48.77" cy="251.59" rx="13.88" ry="28.95" transform="translate(-204.14 210.22) rotate(-69.74)"/>
            <path id="Tail_Outline" data-name="Tail Outline" d="M37.39,258c-14.58-6.47-22.92-29.31-16.24-43.49,1.01-2.14,2.05-5.26,4.91-4.47,2.85.78,1.57,5.42,1.95,7.73,1.21,7.36,3.64,13.72,9.6,18.34.34-1.89.76-3.66,1.26-5.3.26-1.13.58-2.24.96-3.32-9.29-6.81-.22-27.56-16.33-25.06-7.65,1.19-10.95,13.73-11.42,20.21-1.22,16.82,5.95,32.07,20.03,41.23,1.89,1.23,5.25,2.58,7.32,3.72.49.17.97.37,1.44.58-1.36-2.67-2.45-6.08-3.18-9.96-.1-.07-.2-.14-.3-.21Z"/>
            <path id="Tail_Outline-2" data-name="Tail Outline" d="M37.6,236.04s0,.04.01.05c.02.03.05.05.06.05,0,0,0,0,0,0,10.92,4.18,18.85,9.92,18.85,9.92,1.32.96,2.14,1.62,3.39,2.64,4.37,3.55,6.57,5.36,7.15,7.53.5,1.87.24,4.26-.94,6.02-3.03,4.53-11.97,4.42-18.76,2.13-4.63-1.57-8.45-6.58-11.45-6.87-.06,0-.11.03-.13.09-.33,1.29.97,3.28.44,4.62-.32.81-1.44.81-1.72,1.45-.25.58-.12,1.26.34,1.7,2.75,2.69,10.36,9.19,20.66,10.22,2.01.2,15.75.79,20.64-4.98,11.62-13.69-19.98-41.27-36.33-43.11-.89-.1-.52,2.61-.96,3.32-.06.09-1.27,3.4-1.26,5.23Z"/>
          </g>
          
          <g>
            <path className="cls-5" d="M81.18,3.62c-10.64.4-20.92,4.27-30.13,9.61s-17.48,12.14-25.71,18.9c-1.1.9-2.27,1.93-2.52,3.33-.14.78.03,1.57.2,2.34,1.06,4.78,2.22,9.53,3.47,14.26,2,7.51,4.28,15.04,8.14,21.79,3.86,6.75,9.46,12.73,16.61,15.8,1.67.72,3.48,1.28,5.29,1.07,2.01-.23,3.78-1.36,5.48-2.47,1.25-.82,2.51-1.64,3.69-2.55,4.03-3.13,7.1-7.31,9.96-11.53,4.02-5.94,7.73-12.07,11.2-18.34,1.23-2.21,2.43-4.46,3.2-6.87,1.01-3.16,1.23-6.52,1.76-9.79.84-5.25,2.47-10.37,2.84-15.67s-.73-11.04-4.53-14.76c-2.45-2.4-5.75-3.69-8.95-4.92"/>
            <path id="Body_FIll" data-name="Body FIll" className="cls-4" d="M126.94,194.97s37.01.15,43.4,0c7.78.55,15.86-3.3,19.95-10.64,1.01,3.68,1.95,7.48,2.82,11.39,4.49,20.22,5.93,39.09,5.72,55.88,1.33-.02,7.43.04,11.29,4.45,4.63,5.28,4.32,14.82-1.98,22.02-31.88-2.43-42.85-1.04-46.02,1.13-.53.37-3.38,2.48-5.09,1.52-1.16-.65-1.24-2.44-1.36-3.26-.95-6.53-30.99,2.14-35.62.33-.32-.13-1.36-.55-2.84-.82-3.35-.63-6.19,0-7.89.54-1.22.47-2.45.94-3.67,1.41-20.61,4.89-35.76,2.27-44.07,0-8.1-2.21-10.71-4.35-11.55-5.08-12.75-11.09-7.14-35.87-4.5-47.51,2.36-10.41,8.21-28.97,24.68-48.49l1.46.12c3.44,7.43,11.82,12.78,19.03,14.94,2.47.74,7.67,2.09,9.98,2.09h26.25Z"/>
            <rect className="cls-1" x="133.18" y="194.11" width="31.55" height="31.55" rx="3" ry="3"/>
            <rect className="cls-6" x="134.3" y="205.87" width="18.2" height="17.98" rx="3" ry="3"/>
            <rect className="cls-1" x="58.21" y="69.35" width="13.56" height="13.56" rx="3" ry="3"/>
            <rect className="cls-2" x="151.19" y="194.31" width="13.56" height="13.56" rx="3" ry="3" transform="translate(359.06 43.12) rotate(90)"/>
            <rect className="cls-6" x="65.54" y="61.35" width="13.56" height="13.56" rx="3" ry="3"/>
            <path className="cls-5" d="M62.48,93.67c11.4-3.2,17.98-17.2,22.52-27.34,6.07-13.55,11.47-29.55,13.16-44.26,3.55.13,7.14-.15,10.69-.02,23.02.8,46.41-.19,69.4.74,11.2.46,18.64-1.49,26.49,8.58,10.29,13.21,3.57,44.19,5.59,61.11,1.12,9.41,10.49,14.9,11.6,26.91,2.68,28.86-17.25,47.98-45.69,46.44-27.41-1.51-56.78,1.91-83.96,0-15.11-1.06-28.59-12.37-29.91-27.86-1.2-14.13.88-30,.1-44.31ZM119.95,73.17c-3.02-3.41-10.25-3.15-12.75.92-2.11,3.44-2.01,13.3-.82,17.12,2.13,6.8,13.33,5.37,15.3-.57,1.1-3.33.49-14.97-1.73-17.47ZM182.55,71.74c-6.35,1.44-7.93,18.57-.18,21.2,11.12,3.78,12.95-6.86,11.22-15.35-1.07-5.26-6.19-6.95-11.04-5.85ZM167.61,125.92c9.54-.39,26.21-19.49,13.94-25.98-7.19-3.8-24-3.24-32.1-2.16-3.93.53-7.6,3.48-8.37,7.48-1.71,9,11.04,19.39,19.35,20.62,3.47,20.65-23.22,21.77-33.39,9.32-1.59-1.94-2.96-7.12-6.21-6.25-7.43,1.99,1.62,12.65,4.82,15.2,10,7.98,25.64,8.98,36.01,1.1,6.88,6.37,16.88,6.35,24.15.6,1.98-1.56,7.04-6.66,3.11-8.59s-5.38,2.44-8.3,4.09c-4.68,2.64-11.41,2.84-14.42-2.02.96-4.38,2.98-8.96,1.4-13.4Z"/>
            <path className="cls-1" d="M193.48,15.78c3.38-9.81,11.28-9.03,19.89-6.39s38.59,18.47,42.31,25.42c4.08,7.62-5.38,28.56-10.06,35.6-5.16,7.78-13.34,17.02-23.46,10.41-.72-.47-3.7-3.19-3.97-3.76-1.47-3.11-.02-21.9-.38-27.18-1.04-15.5-7.87-29.58-24.34-34.11Z"/>
            <path className="cls-3" d="M145.3,172.85v14.94c-13.41.52-27.92,1.6-41.33.78-11.9-.72-25.25-4.86-27.61-18.7.4-.43,9.26,2.98,11.13,2.98h57.82Z"/>
            <path className="cls-7" d="M150.93,187.53v-14.57h34.95c.15,0,.8-1.09,1.05-.73-1.03,21.54-21.76,14.87-36,15.3Z"/>
            <path d="M167.61,125.92c1.57,4.44-.44,9.02-1.4,13.4,3.01,4.86,9.74,4.66,14.42,2.02,2.92-1.65,4.49-5.95,8.3-4.09s-1.13,7.03-3.11,8.59c-7.27,5.75-17.27,5.78-24.15-.6-10.37,7.88-26.01,6.88-36.01-1.1-3.2-2.56-12.26-13.21-4.82-15.2,3.25-.87,4.62,4.31,6.21,6.25,10.18,12.45,36.86,11.33,33.39-9.32-8.3-1.23-21.06-11.62-19.35-20.62.76-4,4.44-6.95,8.37-7.48,8.1-1.08,24.91-1.64,32.1,2.16,12.27,6.48-4.41,25.59-13.94,25.98Z"/>
            <path d="M119.95,73.17c2.22,2.51,2.83,14.15,1.73,17.47-1.97,5.94-13.17,7.37-15.3.57-1.19-3.82-1.3-13.67.82-17.12,2.5-4.07,9.72-4.34,12.75-.92Z"/>
            <path d="M182.55,71.74c4.86-1.1,9.97.6,11.04,5.85,1.73,8.48-.1,19.13-11.22,15.35-7.75-2.64-6.17-19.76.18-21.2Z"/>
            <path className="cls-2" d="M20.45,118.59c2.78-10.64,16.51-8.11,16.56,3.09.03,7-9.03,22.12-16.23,22.4-5.18.21-16.97-9.76-19.28-14.45-6.4-12.96,9.1-19.65,17.94-11.06h1.01Z"/>
            <g>
              <path className={listening ? "sound-wave-1" : ""} d="M273.77,51c5.49-.22,6.58,9.68,6,13.77-.86,6.06-2.75,11.04-6.23,15.99-1.82,2.59-10.26,12.98-12.62,6.18-1.38-3.97,3.9-6.42,6.13-9.4,3.61-4.82,5.77-10.15,5.3-16.25-.2-2.56-3.53-10.1,1.42-10.3Z"/>
              <rect className={`cls-2 ${listening ? "sound-wave-2" : ""}`} x="269.53" y="94.64" width="13.56" height="13.56" rx="3" ry="3" transform="translate(281.08 -192.88) rotate(70.77)"/>
              <rect className={`cls-1 ${listening ? "sound-wave-3" : ""}`} x="286.43" y="44.59" width="13.56" height="13.56" rx="3" ry="3" transform="translate(108.51 -182.08) rotate(41.71)"/>
              <path className={listening ? "sound-wave-4" : ""} d="M291.36,67.93c2.65-.11,3.18,4.68,2.9,6.66-.42,2.93-1.33,5.34-3.02,7.73-.88,1.25-4.96,6.28-6.1,2.99-.67-1.92,1.89-3.11,2.97-4.55,1.75-2.33,2.79-4.91,2.56-7.86-.1-1.24-1.71-4.88.69-4.98Z"/>
            </g>
            <path d="M36.41,236.36c-1.87,8.81-1.4,15.97-.76,20.47.82,5.8,1.56,10.58,5.22,15.31,3.77,4.87,8.6,7.07,10.69,7.99,5.03,2.21,9.48,2.49,11.45,2.62,46.07,2.99,95.32-2.33,141.73,0,22.51-3.48,17.4-33.43-2.48-36.9-.86-17.77.38-35.73-3.05-53.23-1.37-6.99-4.47-13.73-4.52-20.89,27.12-6.16,42.61-41.48,30.9-66.01-2.95-6.18-9.64-10.45-8.16-18.31,7.29,3.44,13.59,4.86,21.11.83,13.05-6.99,28.77-42.04,23.24-55.84-3.57-8.89-29.91-23.71-39.08-27.63-9-3.85-19.63-7.66-28.61-1.56-4.26,2.89-5.76,7.47-7.91,11.8l-88.35.14C96.38,6.79,88.91.05,80.22.02c-12.65-.05-47.51,17.69-55.71,27.55-8.96,10.77-4.71,22.93-.16,34.56,5.34,13.68,13.55,31.2,29.99,32.93,2.26,24.76-8.12,56.24,17.27,71.82-13.07,19-27.56,37.85-33,60.81M27.53,47.95c-1.29-5.48-2.08-8.89,1.47-13.84,6.27-8.75,37.98-25.01,48.65-26.3,20.67-2.49,10.57,26.69,7.06,37.31-3.45,10.44-12.66,33.44-21.39,39.81-17.91,13.08-32.86-24.49-35.79-36.99ZM194.84,251.31c.63,1.88,6.42,2.25,8.61,3.08,9.09,3.44,12.64,16.65,2.58,20.72-14.15-.92-30.07,1.35-44.01.07-3.16-.29-5.93-1.84-6.46-5.23-.93-5.9,1.91-24.17-2.04-27.53-2.64-2.25-5.74-.24-6.21,2.86-.39,2.6.63,4.48.68,6.8.12,6.27,2.29,22.14-5.86,23.08-7.34.85-16.22-.66-23.74-.02,2.44-9.75-4.86-20.37-14.35-22.78.35-12.79-1.74-25.18-12.14-33.59-2.65-2.14-13.72-9.17-15.33-3.65-1.74,5.93,3.52,5.4,7.01,7.16,7.49,3.78,11.86,11.3,12.72,19.6.43,4.11-.75,11.66.22,14.91.77,2.58,6.07,2.69,8.36,4.02,4.08,2.36,7.78,8.97,6.33,13.7l-2.07.68c-15-.96-31.3,1.16-46.13,0-26.42-2.08-21.39-33.71-15.64-51.45,5.17-15.97,14.38-30.42,24.24-43.84l1.44.1c3.38,6.72,11.62,11.56,18.69,13.51,2.42.67,7.54,1.89,9.81,1.89h25.79c.03,6.07-.06,12.17.03,18.25.02,1.32-.6,2.53-.54,3.91.24,5.43,4.34,10.72,9.85,11.47,4.44.6,19.65.69,23.97.02,14.55-2.27,7.85-23.59,9.32-33.66,7.64.5,15.58-2.98,19.6-9.62,1.2.56,2.45,8.46,2.77,10.3,3.16,17.78,1.48,37.17,2.5,55.26ZM160.03,194.65c2.28.3,2.8.85,3.09,3.09.38,2.89.37,19.55-.34,21.73-.18.56-.57,1.4-1.06,1.69-1.02.6-21.2.64-23.75.35-1.29-.15-2.51-.36-3.43-1.38l1.02-24.44c.57-.41,1.2-.71,1.89-.86,3.17-.69,19.05-.65,22.57-.19ZM151.4,187.12v-13.75h34.04c.15,0,.78-1.03,1.02-.69-1,20.33-21.19,14.04-35.07,14.44ZM143.84,187.12c-12.84.48-26.73,1.47-39.58.72-11.39-.67-24.18-4.47-26.44-17.22.38-.4,8.87,2.75,10.66,2.75h55.36v13.75ZM221.53,119.39c2.68,28.86-17.25,47.98-45.69,46.44-27.41-1.51-56.78,1.91-83.96,0-15.11-1.06-28.59-12.37-29.91-27.86-1.2-14.13.88-30,.1-44.31,11.4-3.2,17.98-17.2,22.52-27.34,6.07-13.55,11.47-29.55,13.16-44.26,3.55.13,7.14-.15,10.69-.02,23.02.8,46.41-.19,69.4.74,11.2.46,18.64-1.49,26.49,8.58,10.29,13.21,3.57,44.19,5.59,61.11,1.12,9.41,10.49,14.9,11.6,26.91ZM244.81,70.44c-4.96,7.77-12.82,17-22.53,10.39-.69-.47-3.56-3.18-3.81-3.75-1.41-3.11-.02-21.87-.36-27.14-1-15.47-7.55-29.53-23.37-34.06,3.25-9.8,10.84-9.02,19.11-6.38,8.04,2.57,37.06,18.45,40.63,25.38,3.91,7.61-5.17,28.52-9.66,35.55Z"/>
          </g>
        </g>
      </g>
    </svg>
  );
};
